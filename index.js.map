{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createGallery(items) {\n  return `\n  <div class=\"wrapWrap\">\n      <li class=\"lFitem\">\n      <a class=\"lFlink\" href=\"${items.webformatURL}\">\n        <img src=\"${items.largeImageURL}\" alt=\"${items.tags}  \" width=\"200\" height=\"200\" />\n      </a>\n    </li>\n\n        <div class=\"wrapFoto\">\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Likes</li>\n            <p class=\"wrapQty\">${items.likes}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Views</li>\n            <p class=\"wrapQty\">${items.views}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Comments</li>\n            <p class=\"wrapQty\">${items.comment}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Downloads</li>\n            <p class=\"wrapQty\">${items.downloads}</p>\n        </ul> \n        </div>\n    </div>\n        </div>\n  `;\n}\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const searchPhoto = (queryPhoto, page) => {\n  const userParams = {\n    params: {\n      key: '45750277-faa37f2a8b8a1a1eac0cf2e32',\n      q: queryPhoto,\n      page: page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      per_page: 15,\n      safesearch: 'true',\n    },\n  };\n  // return fetch(`${apiPix}&${userParams}`).then(response => {\n  //   if (!response.ok) {\n  //     throw new Error(response.status);\n  //   }\n  //   return response.json();\n  // });\n  return axios.get('', userParams);\n};\n","import { createGallery } from './js/render-functions';\nimport { searchPhoto } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst srchPhoto = document.querySelector('.form-js-search');\nconst gallery = document.querySelector('.list-foto');\nconst loaderJs = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nconst showLoader = () => (loaderJs.style.display = 'inline-block');\nconst hideLoader = () => (loaderJs.style.display = 'none');\nlet currPage = 1;\nlet searchValue = '';\n\nconst lightbox = new SimpleLightbox('.list-foto a', {\n  captionData: 'alt',\n  captionDelay: 250,\n});\n\nconst onSearchForm = async event => {\n  event.preventDefault();\n\n  const searchValue = srchPhoto.querySelector('.input-js').value.trim();\n  loaderJs.classList.remove('is-hidden');\n  btnLoadMore.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  currPage = 1;\n\n  searchPhoto(searchValue, currPage)\n    .then(response => {\n      const data = response.data;\n      if (data.hits.length == 0) {\n        iziToast.error({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          position: 'topRight',\n        });\n\n        srchPhoto.reset();\n        return;\n      }\n\n      const galleryTemplate = data.hits\n        .map(imgdetails => createGallery(imgdetails))\n        .join('');\n      gallery.innerHTML = galleryTemplate;\n\n      lightbox.refresh();\n      loaderJs.classList.add('is-hidden');\n      srchPhoto.reset();\n      smthscroll();\n      if (data.totalHits > currPage * 15) {\n        btnLoadMore.classList.remove('is-hidden');\n      }\n    })\n    .catch(error => {\n      console.log(error);\n    });\n};\n\nconst onLoadmore = async () => {\n  currPage++;\n  showLoader();\n\n  try {\n    const response = await searchPhoto(searchValue, currPage);\n    const data = response.data;\n\n    const galleryCardsTemplate = data.hits\n      .map(imgDetails => createGallery(imgdetails))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    smoothScroll();\n    lightbox.refresh();\n\n    if (data.totalHits <= currPage * 15) {\n      btnLoadMore.classList.add('is-hidden');\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results\",\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst smthscroll = () => {\n  const { height } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n  btnLoadMore.classList.add('is-hidden');\n};\n\nsrchPhoto.addEventListener('submit', onSearchForm);\nbtnLoadMore.addEventListener('click', onLoadmore);\n"],"names":["createGallery","items","axios","searchPhoto","queryPhoto","page","userParams","srchPhoto","gallery","loaderJs","btnLoadMore","showLoader","hideLoader","currPage","searchValue","lightbox","SimpleLightbox","onSearchForm","event","response","data","iziToast","galleryTemplate","imgdetails","smthscroll","error","onLoadmore","galleryCardsTemplate","imgDetails","height"],"mappings":"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"}