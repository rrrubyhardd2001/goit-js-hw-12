{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["export function createGallery(items) {\n  return `\n  <div class=\"wrapWrap\">\n      <li class=\"lFitem\">\n      <a class=\"lFlink\" href=\"${items.webformatURL}\">\n        <img src=\"${items.largeImageURL}\" alt=\"${items.tags}  \" width=\"200\" height=\"200\" />\n      </a>\n    </li>\n\n        <div class=\"wrapFoto\">\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Likes</li>\n            <p class=\"wrapQty\">${items.likes}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Views</li>\n            <p class=\"wrapQty\">${items.views}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Comments</li>\n            <p class=\"wrapQty\">${items.comment}</p>\n        </ul> \n    </div>\n        <div class=\"wrapListFoto\">\n        <ul class=\"wrapList\">\n            <li class=\"wrapItem\">Downloads</li>\n            <p class=\"wrapQty\">${items.downloads}</p>\n        </ul> \n        </div>\n    </div>\n        </div>\n  `;\n}\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const searchPhoto = (queryPhoto, page, per_page) => {\n  const userParams = {\n    params: {\n      key: '45750277-faa37f2a8b8a1a1eac0cf2e32',\n      q: queryPhoto,\n      page: page,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      per_page: 'per_page',\n      safesearch: 'true',\n    },\n  };\n  // return fetch(`${apiPix}&${userParams}`).then(response => {\n  //   if (!response.ok) {\n  //     throw new Error(response.status);\n  //   }\n  //   return response.json();\n  // });\n  return axios.get('', userParams);\n};\n","import { createGallery } from './js/render-functions';\nimport { searchPhoto } from './js/pixabay-api';\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst srchPhoto = document.querySelector('.form-js-search');\nconst gallery = document.querySelector('.list-foto');\nconst loaderJs = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.js-load-more');\n\nconst showLoader = () => (loaderJs.style.display = 'inline-block');\nconst hideLoader = () => (loaderJs.style.display = 'none');\nlet currPage = 1;\nlet searchValue = '';\nconst per_page = 20;\nconst lightbox = new SimpleLightbox('.list-foto a', {\n  captionData: 'alt',\n  captionDelay: 250,\n});\n\nconst onSearchForm = async event => {\n  event.preventDefault();\n\n  searchValue = srchPhoto.querySelector('.input-js').value.trim();\n  if (searchValue === '') {\n    iziToast.error({\n      message: 'Sorry, there no image you are looking',\n      position: 'topRight',\n    });\n    return;\n  }\n  showLoader();\n  btnLoadMore.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  currPage = 1;\n\n  try {\n    const response = await searchPhoto(searchValue, currPage, per_page);\n    const data = response.data;\n    if (data.hits.length == 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n\n      srchPhoto.reset();\n      return;\n    }\n\n    const galleryTemplate = data.hits\n      .map(imgdetails => createGallery(imgdetails))\n      .join('');\n    gallery.innerHTML = galleryTemplate;\n\n    lightbox.refresh();\n    hideLoader();\n    srchPhoto.reset();\n    if (data.totalHits > currPage * per_page) {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    console.log(error);\n  }\n};\n\nconst onLoadmore = async () => {\n  currPage++;\n  showLoader();\n\n  try {\n    const response = await searchPhoto(searchValue, currPage, per_page);\n    const data = response.data;\n\n    const galleryCardsTemplate = data.hits\n      .map(imgdetails => createGallery(imgdetails))\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n\n    smthscroll();\n    lightbox.refresh();\n    if (currPage * per_page >= data.totalHits) {\n      btnLoadMore.classList.add('is-hidden');\n      iziToast.error({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      hideLoader();\n    } else {\n      btnLoadMore.classList.remove('is-hidden');\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"We're sorry, something wrong.\",\n      position: 'topLeft',\n    });\n    hideLoader();\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst smthscroll = () => {\n  const { height } = gallery.firstElementChild.getBoundingClientRect();\n  window.scrollBy({\n    top: height * 2,\n    behavior: 'smooth',\n  });\n  btnLoadMore.classList.add('is-hidden');\n};\n\nsrchPhoto.addEventListener('submit', onSearchForm);\nbtnLoadMore.addEventListener('click', onLoadmore);\n"],"names":["createGallery","items","axios","searchPhoto","queryPhoto","page","per_page","userParams","srchPhoto","gallery","loaderJs","btnLoadMore","showLoader","hideLoader","currPage","searchValue","lightbox","SimpleLightbox","onSearchForm","event","iziToast","data","galleryTemplate","imgdetails","error","onLoadmore","galleryCardsTemplate","smthscroll","height"],"mappings":"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"}